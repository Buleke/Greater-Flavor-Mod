######### CHILEAN EVENTS ABOUT PATAGONIA #########

#Initial event for CHL, fires in the 1860 (maybe changed to only fire if ALL of Araucania is occupied)
country_event = {
	id = 18043710
	title = "Troubles in the Araucania"
	desc = "araucania_ptg_desc"
	picture = "araucania_ptg"
	
	fire_only_once = yes
	mean_time_to_happen = { months = 1 }

	trigger = {
		tag = CHL
		2328 = { owned_by = THIS }
		2329 = { owned_by = THIS }
		NOT = { exists = PTG }
		year = 1860
	}
	
	option = { #Trigger early revolt - AI will never do this
        name = "Leave them be"
		CHL = { set_variable = { which = ptg_chain value = 1 } }
	}

	option = { #Historical option, trigger an event to France
		name = "Supress them!"
		CHL = { set_variable = { which = ptg_chain value = 2 } }
	}
}

#Ahistorical revolt event for CHL, fires if Option [1] is taken in the event 18043710
country_event = {
	id = 18043711
	title = "The Kingdom of Araucania revolts!"
	desc = "ptg_revolt_early_desc"
	picture = "araucania_antonnie"

	fire_only_once = yes
	trigger = {
		tag = CHL
		CHL = { check_variable = { which = ptg_chain value = 0.99 } }
		NOT = { CHL = { check_variable = { which = ptg_chain value = 1.01 } } }
	}
	mean_time_to_happen = { months = 5 }
	
	option = { #Stay as CHL and declare war on PTG
       name = "We must crush these malefectors now!"
		2328 = { secede_province = PTG add_core = PTG }
		2329 = { secede_province = PTG add_core = PTG }
		PTG = {
			primary_culture = french
			add_accepted_culture = patagonian
			government = prussian_constitutionalism
			tech_school = culture_tech_school
			political_reform = wealth_weighted_voting
			clr_country_flag = democracy_gov
			clr_country_flag = theocratic_government
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			set_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = clean_up_colonial_government
			set_country_flag = ptg_revolt_early
			set_country_flag = new_world_nation
			CHL = { change_variable = { which = ptg_chain value = 1 } }
			2328 = { sub_unit = { type = infantry value = current } }
			2329 = { sub_unit = { type = infantry value = current } }
		}
		add_casus_belli = { target = PTG type = conquest months = 1 }
		war = {
			target = PTG
			attacker_goal = { casus_belli = conquest }
			defender_goal = { casus_belli = status_quo }
		}
	}

	option = { #Change tag to PTG
		name = "Glory to Antoine! §BSwitch to the §RKingdom of Araucania§W"
		2328 = { secede_province = PTG add_core = PTG }
		2329 = { secede_province = PTG add_core = PTG }
		PTG = {
			primary_culture = french
			add_accepted_culture = patagonian
			government = prussian_constitutionalism
			tech_school = culture_tech_school
			political_reform = wealth_weighted_voting
			clr_country_flag = democracy_gov
			clr_country_flag = theocratic_government
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			set_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = clean_up_colonial_government
			set_country_flag = ptg_revolt_early
			set_country_flag = new_world_nation
			CHL = { change_variable = { which = ptg_chain value = 1 } }
			2328 = { sub_unit = { type = infantry value = current } }
			2329 = { sub_unit = { type = infantry value = current } }
		}
		add_casus_belli = { target = PTG type = conquest months = 1 }
		war = {
			target = PTG
			attacker_goal = { casus_belli = conquest }
			defender_goal = { casus_belli = status_quo }
		}
		change_tag_no_core_switch = PTG
	}
}

#Scripted PTG win event if its either captures Santiago or peaces CHL out
country_event = {
	id = 18043712
	title = "The Araucanie are victorious!"
	desc = "araucanie_win_desc"
	picture = "araucanie_blazon"
	

	fire_only_once = yes
    mean_time_to_happen = { days = 1 }

	trigger = {
		tag = PTG
		has_country_flag = ptg_revolt_early
		OR = {
			2324 = { controlled_by = PTG }
			truce_with = CHL
		}
	}

	option = { #Obtain any land CHL owns that's in the Araucanie region - Cores the two Patagonian states from Argentina (excluding the Falklands - Refer to decision "fra_falkland_ptg")
		name = "Huzzah!"
		CHL = { any_owned = { limit = { region = CHL_2332 } secede_province = PTG } }
		CHL_2332 = { add_core = PTG }
		ARG_2391 = { add_core = PTG }
		ARG_2398 = { add_core = PTG }
	}
}

#Scripted CHL event to annex PTG if they occupy both provinces but don't peace out for whatever reason (Never trust a computer)
country_event = {
	id = 18043713
	title = "Chile victorious!"
	desc = "chl_araucanie_win_desc"
	picture = "araucanie_blazon"
	
	fire_only_once = yes
	mean_time_to_happen = { days = 1 }
	
   trigger = {
		tag = CHL
		PTG = { has_country_flag = ptg_revolt_early }
		2329 = { controlled_by = CHL }
		2328 = { controlled_by = CHL }
	}

	option = { 
		name = "Huzzah!"
		PTG = { annex_to = CHL }
		2329 = { remove_core = PTG }
		2328 = { remove_core = PTG }
		CHL = { change_variable = { which = ptg_chain value = -10 } }
	}
}

#FRA event where Antoine asks for Help, caused by option [2] in the event 18043710
country_event = {
	id = 18043714
	title = "Antoine asks for our help"
	desc = "antoine_begs_FRA_desc"
	picture = "antoine"
	
	fire_only_once = yes
	trigger = {
		primary_culture = french
		capital = 425
		OR = { 
			AND = { NOT = { CHL = { check_variable = { which = ptg_chain value = 2.01 } } } CHL = { check_variable = { which = ptg_chain value = 1.99 } } }
			CHL = { has_country_flag = ptg_revolt_early }
		}
		NOT = { exists = PTG }
	}

	option = { #The chains ends and nothing else happens (good job French "fun police" Republic)
       name = "Who is this madman? Get him out of here!"
	   CHL = { change_variable = { which = ptg_chain value = -10 } }
	   relation = { who = CHL value = 10 }
	}

	option = { #France continues the chain - AI will never take this
		name = "But of course! We must help the Mapuche against Childean oppresion! §RGain 5 Infamy§W"
		CHL = { change_variable = { which = ptg_chain value = 1 } }
		prestige = -5 #he's a goddamn madman @France
		relation = { who = CHL value = -10 }
		badboy = 5
	}
}

#CHL event caused by [event 18043714]
country_event = {
	id = 18043715
	title = "France demands the liberation of Araucania!"
	desc = "fra_prg_free_desc"
	picture = "araucanie_blazon"
	
	fire_only_once = yes
	mean_time_to_happen = { months = 1 }
	
	trigger = {
		tag = CHL
		CHL = { check_variable = { which = ptg_chain value = 2.99 } }
		NOT = { CHL = { check_variable = { which = ptg_chain value = 3.01 } } }
	}
	
	option = { #Goes to war with France - Sends event 18043716 to Argentina - Same PTG cores as 18043711
        name = "These Frenchies will pay for this!"
		FRA = {
			war = {
				target = CHL
				attacker_goal = { casus_belli = war_reparations }
				defender_goal = { casus_belli = war_reparations }
			}
		}
		set_country_flag = ptg_revolt
		any_country = { limit = { OR = { tag = ARC tag = ARG } } country_event = 18043716 days = 1 }
		2328 = { add_core = PTG }
		2329 = { add_core = PTG }
		CHL_2332 = { add_core = PTG }
		CHL = { change_variable = { which = ptg_chain value = 1 } }
	}

	option = {
		name = "There's nothing we can do" #CHL gives up PTG and its Araucanian provinces - Sends FRA event 18043717
		2328 = { secede_province = PTG add_core = PTG }
		2329 = { secede_province = PTG add_core = PTG }
		CHL_2332 = { secede_province = PTG add_core = PTG }
	    any_country = { limit = { primary_culture = french capital = 425 } country_event = 18043717 days = 1 }
		CHL = { change_variable = { which = ptg_chain value = -10 } }
		PTG = {
			primary_culture = french
			add_accepted_culture = patagonian
            tech_school = culture_tech_school
			set_country_flag = new_world_nation
			religion = catholic
		    set_country_flag = catholic_country
            clr_country_flag = animist_country
			government = prussian_constitutionalism
			clr_country_flag = government_dominion
			clr_country_flag = democracy_gov
			clr_country_flag = theocratic_government
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			set_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = clean_up_colonial_government
            political_reform = wealth_weighted_voting
		}
	}
}

country_event = { #ARG event caused by option [1] in 18043715
	id = 18043716
	title = "France attacks Chile for Araucania!"
	desc = "arg_ptg_fra_desc"
	picture = "araucanie_blazon"
	
	fire_only_once = yes
    is_triggered_only = yes
	
	option = { #Allies CHL and goes to war with FRA
		name = "Get these pesky Europeans out of my yard! §BGo to war with France§W"
		create_alliance = CHL
		relation = { who = FRA value = -50 }
		# Audax Validator "." Ignore_NEXT
		CHL = { change_variable = { which = ptg_chain value = 1 } war = { attacker_goal = { casus_belli = call_allies_cb } call_ally = yes } }
		ARG_2391 = { add_core = PTG }
		ARG_2398 = { add_core = PTG }
	}

	option = { #Ignores CHL like a true sigma
		name = "We can't do anything it"
		relation = { who = CHL value = -50 }
	}
}

#FRA event if CHL accepts caused by option [2] in 18043715
country_event = {
	id = 18043717
	title = "The Chileans have accepted our proposal!"
	desc = "fra_win_no_war_desc"
	picture = "araucanie_blazon"
	
	fire_only_once = yes
	is_triggered_only = yes

	option = { #Just frees PTG and allies them
		name = "Huzzah!"
		CHL = { any_owned = { limit = { is_core = PTG } secede_province = PTG } prestige = -30 }
        create_alliance = PTG
	}

	option = { #Sends event 18043718 to PTG
		name = "We need to be more involved in Patagonia §BPuppet §RAraucanie§W"
		CHL = { any_owned = { limit = { is_core = PTG } secede_province = PTG } prestige = -30 }
		PTG = { country_event = 18043718 days = 3 }
	}
}

#PTG event caused by option [2] in 18043717
country_event = {
	id = 18043718
	title = "The French have demanded we become their puppet!"
	desc = "fra_puppet_ptg_desc"
	picture = "araucanie_blazon"
	
	fire_only_once = yes
	is_triggered_only = yes
	
	option = { #Become a puppet of FRA and a Viceroyalty
		name = "Vive Nouvelle France! §BBecome a §RViceroyalty §Bof §RFrance§W"
		religion = catholic
		government = viceroyalty
		primary_culture = french
		add_accepted_culture = patagonian
        tech_school = culture_tech_school
		set_country_flag = new_world_nation
		set_country_flag = catholic_country
        clr_country_flag = animist_country
		set_country_flag = government_dominion
		clr_country_flag = democracy_gov
		clr_country_flag = theocratic_government
		clr_country_flag = communist_gov
		clr_country_flag = absolute_monarchy_gov
		clr_country_flag = semi_constitutional_monarchy_gov
		clr_country_flag = constitutional_monarchy_gov
		clr_country_flag = presidential_dictatorship_gov
		clr_country_flag = fascist_gov
		clr_country_flag = clean_up_colonial_government
        political_reform = wealth_weighted_voting
		FRA = { create_vassal = PTG }
		ARG_2391 = { add_core = PTG }
		ARG_2398 = { add_core = PTG }
	}

	option = { #Goes to war with FRA and become a Constitutional Monarchy
		name = "Maintain our Freedom!§BGo to war with §RFrance§W"
		add_casus_belli = { target = FRA type = conquest months = 1 }
		FRA = {
			war = {
			    target = PTG
			    attacker_goal = { casus_belli = conquest }
			    defender_goal = { casus_belli = status_quo }
			}
			set_country_flag = ptg_refused
		}
		religion = catholic
		government = hms_government
		primary_culture = french
		add_accepted_culture = patagonian
        tech_school = culture_tech_school
		set_country_flag = new_world_nation
		set_country_flag = catholic_country
        clr_country_flag = animist_country
		clr_country_flag = government_dominion
		clr_country_flag = democracy_gov
		clr_country_flag = theocratic_government
		clr_country_flag = communist_gov
		clr_country_flag = absolute_monarchy_gov
		clr_country_flag = semi_constitutional_monarchy_gov
		set_country_flag = constitutional_monarchy_gov
		clr_country_flag = presidential_dictatorship_gov
		clr_country_flag = fascist_gov
		clr_country_flag = clean_up_colonial_government
        political_reform = universal_voting
		political_reform = gerrymandering
		ARG_2391 = { add_core = PTG }
		ARG_2398 = { add_core = PTG }
	}
}

#FRA win event if they annex PTG due to option [2] in 18043718
country_event = {
	id = 180437189
	title = "Patagonia secured"
	desc = "ptg_fra_refuse_desc"
	picture = "araucanie_blazon"
	
	fire_only_once = yes
	mean_time_to_happen = { days = 3 }

	trigger = {
        primary_culture = french
		capital = 425
		has_country_flag = ptg_refused
		NOT = { exists = PTG }
	}
	
	option = { #idk larp
		name = "Serves them right"
		any_owned = { limit = { is_core = PTG } secede_province = PTG }
		prestige = 10
		PTG = {
			religion = catholic
			government = viceroyalty
			primary_culture = french
			add_accepted_culture = patagonian
			tech_school = culture_tech_school
			set_country_flag = new_world_nation
			set_country_flag = catholic_country
			clr_country_flag = animist_country
			set_country_flag = government_dominion
			clr_country_flag = democracy_gov
			clr_country_flag = theocratic_government
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			clr_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = clean_up_colonial_government
			political_reform = wealth_weighted_voting
		}
		create_vassal = PTG
		clr_country_flag = ptg_refused
	}
}

#FRA wins against CHL if they have disarmed them
country_event = {
	id = 180437190
	title = "The French are victorious!"
	desc = "fra_win_ptg_desc"
	picture = "araucania_ptg"
	
	fire_only_once = yes
	mean_time_to_happen = { days = 1 }
	
	trigger = {
		tag = CHL
		CHL = { check_variable = { which = ptg_chain value = 3.99 } }
		is_disarmed = yes
		truce_with = FRA
		has_country_flag = ptg_revolt
	}
	
	option = { #Releases PTG and IF shenanigans
		name = "Damn!" 
        any_country = { #If ARG has joined the war they also get event 180437191
			limit = { CHL = { check_variable = { which = ptg_chain value = 4.99 } OR = { tag = ARG tag = ARC } } } 
			country_event = { id = 180437191 days = 2 } 
		}
		CHL = { any_owned = { limit = { is_core = PTG } secede_province = PTG } prestige = -30 clr_country_flag = ptg_revolt }
		any_country = { limit = { NOT = { CHL = { check_variable = { which = ptg_chain value = 4.99 } } } tag = PTG } country_event = 18043718 days = 2 } #If ARG hasn't joined the war PTG gets event 18043718
		PTG = {  
			primary_culture = french
			add_accepted_culture = patagonian
            tech_school = culture_tech_school
			set_country_flag = new_world_nation
			religion = catholic
		    set_country_flag = catholic_country
            clr_country_flag = animist_country
			government = prussian_constitutionalism
			clr_country_flag = government_dominion
			clr_country_flag = democracy_gov
			clr_country_flag = theocratic_government
			clr_country_flag = communist_gov
			clr_country_flag = absolute_monarchy_gov
			set_country_flag = semi_constitutional_monarchy_gov
			clr_country_flag = constitutional_monarchy_gov
			clr_country_flag = presidential_dictatorship_gov
			clr_country_flag = fascist_gov
			clr_country_flag = clean_up_colonial_government
            political_reform = wealth_weighted_voting
		}
	}
}

#FRA wins against ARG - refer to the notes in event 180437190
country_event = {
	id = 180437191
	title = "The French are victorious!"
	desc = "fra_win_ptg_desc"
	picture = "araucania_ptg"
	
	fire_only_once = yes
	is_triggered_only = yes	
	
	option = { 
		name = "Damn!"
		any_country = { limit = { OR = { tag = ARC tag = ARG } } any_owned = { limit = { is_core = PTG } secede_province = PTG } prestige = -30 }
		PTG = { country_event = 18043718 days = 2 }
		CHL = { clr_country_flag = ptg_revolt change_variable = { which = ptg_chain value = -10 } }
	}
}

#FRA takes an L
country_event = {
	id = 180437192
	title = "The Chileans are victorious!"
	desc = "fra_lose_ptg_desc"
	picture = "araucania_ptg"

	fire_only_once = yes
	mean_time_to_happen = { days = 3 }

	trigger = {
		primary_culture = french
		capital = 425
		CHL = { has_country_flag = ptg_revolt check_variable = { which = ptg_chain value = 3.99 } }
		OR = {
			AND = {
				is_disarmed = yes
				truce_with = CHL
			}
			425 = { OR = { controlled_by = CHL controlled_by = ARG controlled_by = ARC } }
		}
	}

	option = { 
		name = "Damn!"
		any_land_province = { limit = { is_core = PTG } remove_core = PTG owner = { prestige = 50 } }
		prestige = -50
	}
}
